---
title: "Marker Gene Survey Preparing Tables"
author: "Trevor_Gould"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  pdf_document: default
  html_document: default
---
![](/Users/goul0109/Documents/UMII-full-banner.png)
```{r setup, include=FALSE}
#Setup and Functions
knitr::opts_chunk$set(echo = TRUE)

#load libraries
#library()

# input tables
inputtable <- readRDS('seqtab_nochim.rds')
# input metadata
metadata <- read.table('metadata.txt', sep = '\t', comment='', head=TRUE, row.names=1, check.names = FALSE)

#find common names
common <- intersect(rownames(metadata),rownames(inputtable))
# get just the overlapping samples
newmap <- metadata[common,, drop = FALSE]
dim(newmap)
fordist <- fordist[common,, drop = FALSE]
dim(fordist)
#save to file
saveRDS(fordist, file = "Sequence_table_common.rds")
write.table(newmap, file = "Metadata_common.txt")
#Taxa table
newtable1 <- t(newtable)
taxa <- readRDS("taxID.rds")
both <- cbind(newtable1,taxa)
#save to file
write.table(both, file = "combined_taxa_blank_removed.txt", sep = "\t", quote = FALSE)
```
